{
  "name": "API Endpoint Code Generator",
  "description": "AI-powered API endpoint generator that helps APIAgent create REST endpoints with proper validation, error handling, and documentation",
  "data": {
    "nodes": [
      {
        "id": "api-requirements-input",
        "type": "ChatInput",
        "position": { "x": 100, "y": 100 },
        "data": {
          "type": "ChatInput",
          "node": {
            "base_classes": ["Message"],
            "description": "Receives API specification requirements",
            "display_name": "API Requirements Input",
            "template": {
              "input_value": {
                "type": "str",
                "required": true,
                "placeholder": "Describe your API endpoints requirements...",
                "show": true,
                "multiline": true,
                "display_name": "API Requirements",
                "info": "Natural language description of API endpoints needed",
                "value": ""
              }
            }
          }
        }
      },
      {
        "id": "api-design-model",
        "type": "OpenAIModel",
        "position": { "x": 400, "y": 100 },
        "data": {
          "type": "OpenAIModel",
          "node": {
            "base_classes": ["BaseLanguageModel"],
            "description": "GPT-4 model specialized for API design",
            "display_name": "API Design Model",
            "template": {
              "model_name": {
                "type": "str",
                "required": true,
                "show": true,
                "value": "gpt-4-turbo-preview",
                "display_name": "Model Name"
              },
              "temperature": {
                "type": "float",
                "required": false,
                "show": true,
                "value": 0.2,
                "display_name": "Temperature"
              }
            }
          }
        }
      },
      {
        "id": "api-design-prompt",
        "type": "PromptTemplate",
        "position": { "x": 400, "y": 300 },
        "data": {
          "type": "PromptTemplate",
          "node": {
            "base_classes": ["StringPromptTemplate"],
            "description": "Expert API design prompt",
            "display_name": "API Design Prompt",
            "template": {
              "template": {
                "type": "str",
                "required": true,
                "show": true,
                "multiline": true,
                "value": "You are an expert API architect specializing in REST API design for Node.js/Express and Supabase Edge Functions.\n\nGiven the following requirements, create production-ready API endpoints with:\n1. Proper HTTP methods and status codes\n2. Input validation schemas (Joi/Zod)\n3. Authentication middleware integration\n4. Error handling and response formatting\n5. Rate limiting considerations\n6. Database queries (Supabase/PostgreSQL)\n7. OpenAPI/Swagger documentation\n8. Unit test templates\n\nRequirements:\n{requirements}\n\nProvide the output in this JSON format:\n{\n  \"endpoints\": [\n    {\n      \"path\": \"/api/v1/resource\",\n      \"method\": \"GET/POST/PUT/DELETE\",\n      \"summary\": \"Brief description\",\n      \"description\": \"Detailed description\",\n      \"authentication\": \"required/optional/none\",\n      \"parameters\": [\n        {\n          \"name\": \"param_name\",\n          \"in\": \"path/query/body\",\n          \"type\": \"string/number/object\",\n          \"required\": true/false,\n          \"description\": \"Parameter description\",\n          \"validation\": \"validation_schema\"\n        }\n      ],\n      \"request_body\": {\n        \"content_type\": \"application/json\",\n        \"schema\": \"request_schema\",\n        \"example\": {}\n      },\n      \"responses\": {\n        \"200\": {\n          \"description\": \"Success response\",\n          \"schema\": \"response_schema\",\n          \"example\": {}\n        },\n        \"400\": {\n          \"description\": \"Bad request\",\n          \"schema\": \"error_schema\"\n        }\n      },\n      \"implementation\": {\n        \"handler_code\": \"// Express/Supabase function code\",\n        \"middleware\": [\"auth\", \"validation\", \"rate_limit\"],\n        \"database_queries\": [\"SQL queries needed\"],\n        \"error_handling\": \"Error handling code\"\n      },\n      \"tests\": {\n        \"unit_tests\": \"// Jest test code\",\n        \"integration_tests\": \"// API integration tests\"\n      }\n    }\n  ],\n  \"openapi_spec\": {\n    \"openapi\": \"3.0.0\",\n    \"info\": {\n      \"title\": \"Generated API\",\n      \"version\": \"1.0.0\"\n    },\n    \"paths\": {}\n  },\n  \"shared_components\": {\n    \"middleware\": {\n      \"auth\": \"// Authentication middleware\",\n      \"validation\": \"// Validation middleware\",\n      \"error_handler\": \"// Error handling middleware\"\n    },\n    \"schemas\": {\n      \"common_schemas\": \"// Reusable schemas\"\n    },\n    \"utils\": {\n      \"response_formatter\": \"// Response formatting utilities\",\n      \"database_helpers\": \"// Database helper functions\"\n    }\n  },\n  \"deployment\": {\n    \"supabase_functions\": [\"// Supabase Edge Function files\"],\n    \"environment_variables\": [\"Required env vars\"],\n    \"database_setup\": \"// Required database setup\"\n  },\n  \"security_notes\": [\"Security recommendations\"],\n  \"performance_notes\": [\"Performance optimization tips\"]\n}",
                "display_name": "API Design Template"
              }
            }
          }
        }
      },
      {
        "id": "api-generation-chain",
        "type": "LLMChain",
        "position": { "x": 700, "y": 200 },
        "data": {
          "type": "LLMChain",
          "node": {
            "base_classes": ["Chain"],
            "description": "Chain that generates API endpoints",
            "display_name": "API Generation Chain"
          }
        }
      },
      {
        "id": "code-review-model",
        "type": "OpenAIModel",
        "position": { "x": 1000, "y": 100 },
        "data": {
          "type": "OpenAIModel",
          "node": {
            "base_classes": ["BaseLanguageModel"],
            "description": "GPT-4 model for code review",
            "display_name": "Code Review Model",
            "template": {
              "model_name": {
                "type": "str",
                "required": true,
                "show": true,
                "value": "gpt-4-turbo-preview",
                "display_name": "Model Name"
              }
            }
          }
        }
      },
      {
        "id": "code-review-prompt",
        "type": "PromptTemplate",
        "position": { "x": 1000, "y": 300 },
        "data": {
          "type": "PromptTemplate",
          "node": {
            "base_classes": ["StringPromptTemplate"],
            "description": "Code review and optimization prompt",
            "display_name": "Code Review Prompt",
            "template": {
              "template": {
                "type": "str",
                "required": true,
                "show": true,
                "multiline": true,
                "value": "You are a senior software architect reviewing API code for production readiness.\n\nReview the following API implementation and provide:\n1. Code quality assessment\n2. Security vulnerability analysis\n3. Performance optimization suggestions\n4. Best practices compliance\n5. Error handling improvements\n6. Testing completeness review\n7. Documentation quality check\n\nAPI Implementation:\n{api_code}\n\nOriginal requirements:\n{requirements}\n\nProvide output in this format:\n{\n  \"review_status\": \"APPROVED/NEEDS_REVISION/REJECTED\",\n  \"overall_score\": 85,\n  \"categories\": {\n    \"security\": {\n      \"score\": 90,\n      \"issues\": [\"List of security issues\"],\n      \"recommendations\": [\"Security improvements\"]\n    },\n    \"performance\": {\n      \"score\": 80,\n      \"issues\": [\"Performance concerns\"],\n      \"recommendations\": [\"Performance optimizations\"]\n    },\n    \"code_quality\": {\n      \"score\": 85,\n      \"issues\": [\"Code quality issues\"],\n      \"recommendations\": [\"Code improvements\"]\n    },\n    \"testing\": {\n      \"score\": 75,\n      \"issues\": [\"Testing gaps\"],\n      \"recommendations\": [\"Testing improvements\"]\n    },\n    \"documentation\": {\n      \"score\": 90,\n      \"issues\": [\"Documentation issues\"],\n      \"recommendations\": [\"Documentation improvements\"]\n    }\n  },\n  \"critical_fixes\": [\"Must-fix issues before deployment\"],\n  \"optimizations\": [\"Nice-to-have improvements\"],\n  \"deployment_readiness\": {\n    \"ready\": true/false,\n    \"checklist\": [\n      {\n        \"item\": \"Environment variables configured\",\n        \"status\": \"complete/pending/missing\"\n      }\n    ]\n  },\n  \"improved_code\": \"// Optimized version of the code\"\n}",
                "display_name": "Code Review Template"
              }
            }
          }
        }
      },
      {
        "id": "code-review-chain",
        "type": "LLMChain",
        "position": { "x": 1300, "y": 200 },
        "data": {
          "type": "LLMChain",
          "node": {
            "base_classes": ["Chain"],
            "description": "Chain that reviews and optimizes the generated API code",
            "display_name": "Code Review Chain"
          }
        }
      },
      {
        "id": "api-output",
        "type": "ChatOutput",
        "position": { "x": 1600, "y": 200 },
        "data": {
          "type": "ChatOutput",
          "node": {
            "base_classes": ["Message"],
            "description": "Outputs the reviewed API implementation",
            "display_name": "API Code Output"
          }
        }
      }
    ],
    "edges": [
      {
        "id": "api-edge-1",
        "source": "api-requirements-input",
        "target": "api-design-prompt",
        "sourceHandle": "output",
        "targetHandle": "requirements"
      },
      {
        "id": "api-edge-2",
        "source": "api-design-prompt",
        "target": "api-generation-chain",
        "sourceHandle": "output",
        "targetHandle": "prompt"
      },
      {
        "id": "api-edge-3",
        "source": "api-design-model",
        "target": "api-generation-chain",
        "sourceHandle": "output",
        "targetHandle": "llm"
      },
      {
        "id": "api-edge-4",
        "source": "api-generation-chain",
        "target": "code-review-prompt",
        "sourceHandle": "output",
        "targetHandle": "api_code"
      },
      {
        "id": "api-edge-5",
        "source": "api-requirements-input",
        "target": "code-review-prompt",
        "sourceHandle": "output",
        "targetHandle": "requirements"
      },
      {
        "id": "api-edge-6",
        "source": "code-review-prompt",
        "target": "code-review-chain",
        "sourceHandle": "output",
        "targetHandle": "prompt"
      },
      {
        "id": "api-edge-7",
        "source": "code-review-model",
        "target": "code-review-chain",
        "sourceHandle": "output",
        "targetHandle": "llm"
      },
      {
        "id": "api-edge-8",
        "source": "code-review-chain",
        "target": "api-output",
        "sourceHandle": "output",
        "targetHandle": "input"
      }
    ],
    "viewport": { "x": 0, "y": 0, "zoom": 1 }
  },
  "is_component": false
}